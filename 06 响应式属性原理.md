### 06. Vue中能够让数组在视图中更新的操作（数组的变异方法）

```html
 <li v-for="value of arr">
                {{value}}
            </li>
```

```js
  arr: [1, 2, 3, 4, 5],
```

> `.push()`在数组的最后位置增加一个item，该方法会改变原数组

![image-20200116161400734](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116161400734.png)

> push方法可以改变视图
>
> ![image-20200116161704639](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116161704639.png)
>
> 其实也不仅仅是增加一个item，也可以增加多个item，不过位置是固定的。

> `.shift()`删除数组的第一个item，该方法会改变原数组

![image-20200116162018489](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116162018489.png)

> - shift方法可以改变视图
> - 该方法不需要传入参数，每次执行删除数组的第一项，并且返回被删除的item

> `.unshift()`在数组的起始位置增加一个item

![image-20200116162729375](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116162729375.png)

> - `.unshift()`方法可以改变视图
> - 该方法也不仅仅可以增加一个item，而是可以增加多个item，不过位置是固定在数组开头的

`.pop()`删除数组的最后一个item，该方法会改变原数组

![image-20200116163210766](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116163210766.png)

> - pop方法可以改变视图
> - 该方法不需要传入参数，每次执行删除数组的最后一项，并且返回被删除的item

> `.reverse()`反转数组项的顺序,该方法会改变原数组

![image-20200116163508423](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116163508423.png)

> `reverse`方法可以改变视图

> `.sort()`该方法会按照字符串的先后顺序对数组的每一项进行排序，如果数组的某项不是字符串，那么会把不是字符串的项先转换为字符串，然后再排序

![image-20200116171808613](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116171808613.png)

> `.sort`方法也可以改变视图

> `.concat()`方法可以基于当前数组中所有项创建一个新数组，这个方法会将接收到的参数添加到这个数组的末尾，最后返回新构建的数组，该方法不会改变原数组

![image-20200116172443161](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116172443161.png)

> concat方法不可以改变视图

> .slice()方法是截取一段区间，如果传入一个参数，则截取从该索引到数组末尾的所有项（包括最后一项），如果传入两个参数，那么第一个是截取的起始位置，第二个是结束位置，前闭后开（包括起始位置，不包括结束位置）。该方法不会改变原数组。

![image-20200116173049016](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116173049016.png)

> slice不会改变视图

> `.splice()`方法接受三个参数，第一个参数是起始位置，第二个参数是要删除的项的数量，第二个以后的所有参数都是要加入的项，统称为第三个参数。根据参数的不同可以实现删除、插入、替换（其实替换就是删除插入的结合）的功能，由于可以在任意位置实现以上三种功能，所以`splice`是数组中最强大的方法。该方法会改变原数组。并且返回值是被删除的项

![image-20200116174912212](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116174912212.png)

> splice方法会改变视图

> 总结：数组的9种方法里面，能在Vue中改变视图的有以下7种，并且这七种都是在数组中能改变原数组的方法：
>
> - .push()
> - .shift()
> - .unshift()
> - .pop()
> - .reverse()
> - .sort()
> - .splice()

> 剩下两种不能在Vue中改变视图的方法是：
>
> - .cancat()
> - .slice()
>
> 此外，还有两种不能让数组在视图中更新的操作：
>
> - 修改数组的索引
> - 修改数组的长度

### 06.1 Vue中能够让对象在视图中更新的操作

```HTML
 <div id="app">
        <p>{{person}}</p>
    </div>
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
    <script>
        let vm = new Vue({
            el: "#app",
            data: {
                person: {
                    name: "王雨波",
                    age: 18,
                },
            },
        })
    </script>
```

> 修改对象的属性：

![image-20200116193301517](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116193301517.png)

> 修改对象的属性可以改变视图

> 添加对象属性：

![image-20200116193505594](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116193505594.png)

> 添加对象属性不可以改变视图

> 删除对象的属性：

![image-20200116193715366](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116193715366.png)

> 删除对象的属性也不可以改变视图

> 总结：Vue中能够让对象在视图中更新的操作只有修改对象属性，而添加和删除对象的属性都不能改变视图。

> 原理探究：当你把一个普通的 JavaScript 对象传入 Vue 实例作为 data 选项，Vue 将遍历此对象所有的属性，并使用 `Object.defineProperty` 把这些属性全部转为 getter/setter。也就是说有getter和setter属性的才能叫响应式属性
>
> ![image-20200116194842826](C:\Users\王雨波\AppData\Roaming\Typora\typora-user-images\image-20200116194842826.png)
>
> 受现代 JavaScript 的限制 (而且 Object.observe 也已经被废弃)，**Vue 无法检测到对象属性的添加或删除。**由于 Vue 会在初始化实例时对属性执行 getter/setter 转化，所以属性必须在 data 对象上存在才能让 Vue 将它转换为响应式的。

